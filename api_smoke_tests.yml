---
- config:
    - testset: "Basic flask API tests"
    - timeout: 100  # Increase timeout from the default 10 seconds
- test:
    - name: "Basic get"
    - url: "/todos"
- test:
    - name: "Get single todo"
    - url: "todos/todo3"
- test:
    - name: "Delete a single todo, verify that works"
    - url: "todos/todo3"
    - method: 'DELETE'
- test: # create todo by PUT
    - name: "Create/update todo"
    - url: "todos/todo1"
    - method: "PUT"
    - body: '{"task": "API Test"}'
    - headers: {'Content-Type': 'application/json'}
    - validators:  # This is how we do more complex testing!
        - compare: {header: content-type, comparator: contains, expected: 'json'}
        - compare: {jsonpath_mini: 'task', expected: 'API Test'}  # JSON extraction
        - compare: {raw_body:"", comparator:contains, expected: 'API' }  # Tests on raw response
- test: # create todo by POST
    - name: "Create todo"
    - url: "/todos"
    - method: "POST"
    - body: '{"task": "New Todo"}'
    - headers: {Content-Type: application/json}
